utility function for version 3
with new files